<div class="container mt-4">
  <h2>URL Dashboard</h2>

  <div class="mb-2 text-muted" *ngIf="currentUser.isAuthenticated">
    Logged in as: <strong>{{ currentUser.username }}</strong>
    <span *ngIf="currentUser.isAdmin" class="badge bg-danger">Admin</span>
  </div>

  <div class="card mb-3" *ngIf="currentUser.isAuthenticated">
    <div class="card-body">
      <div class="input-group">
        <input type="text" class="form-control" [(ngModel)]="newUrl" placeholder="Enter long URL here...">
        <button class="btn btn-primary" (click)="addUrl()">Shorten URL</button>
      </div>
      <div *ngIf="errorMessage" class="text-danger mt-2">
        {{ errorMessage }}
      </div>
    </div>
  </div>

  <table class="table table-striped table-hover">
    <thead class="thead-dark">
    <tr>
      <th>Original URL</th>
      <th>Short Code</th>
      <th>Created By</th>
      <th>Actions</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let url of urls">
      <td><a [href]="url.originalURL" target="_blank">{{ url.originalURL }}</a></td>
      <td><strong>{{ url.shortCode }}</strong></td>
      <td>{{ url.createdBy }}</td>
      <td>
        <button *ngIf="canDelete(url)" class="btn btn-danger btn-sm" (click)="deleteUrl(url.id)">Delete</button>
      </td>
    </tr>
    <tr *ngIf="urls.length === 0">
      <td colspan="4" class="text-center">No URLs found.</td>
    </tr>
    </tbody>
  </table>
</div>
